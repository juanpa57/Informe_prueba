Traceback (most recent call last):
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\jupyter_cache\executors\utils.py", line 51, in single_nb_execution
    executenb(
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\nbclient\client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\nbclient\util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\nbclient\util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\asyncio\base_events.py", line 647, in run_until_complete
    return future.result()
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\nbclient\client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\nbclient\client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "C:\Users\jpocampo\.conda\envs\nuevo2-env\lib\site-packages\nbclient\client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
#prueba

tabla1 = pd.DataFrame(data)

# Convertir la columna "year" a tipo categ√≥rico para mantener la paleta de colores discreta
tabla1['year'] = tabla1['year'].astype('category')

# Separar los datos de l√≠nea base (meses 1 al 3) y periodo de estudio (meses 4 al 6)
linea_base = tabla1[tabla1['month'].between(1, 3)]
periodo_estudio_energia = tabla1[tabla1['month'].between(4, 6)]

# Calcular el valor promedio de la l√≠nea base
valor_promedio_linea_base = linea_base['value'].mean()

# Crear el gr√°fico
fig = px.bar(
    pd.concat([linea_base, periodo_estudio_energia]),
    x='month',
    y='value',
    color='year',  # El color ahora representar√° las distintas categor√≠as de la columna "year"
    facet_col='variable',
    labels={'month': 'Mes', 'value': 'Consumo de electricidad [kWh/mes]', 'year': 'A√±o'},
    title='Comportamiento del Consumo de Electricidad en Periodo de Estudio vs. Consumo L√≠nea Base',
    category_orders={'month': [1, 2, 3, 4, 5, 6]},
    color_discrete_map={2023: '#d5752d', 2022: '#59595b'}  # Asignar los colores de la paleta a cada a√±o
)

# Agregar la l√≠nea horizontal del valor promedio de la l√≠nea base
fig.add_hline(y=valor_promedio_linea_base, line_dash="dash", line_color='#ca0045', annotation_text=f"Promedio L√≠nea Base: {valor_promedio_linea_base:.2f} kWh/mes", annotation_position="top left")

# Aplicar los mismos ajustes al dise√±o de la figura que en la primera gr√°fica
fig.update_layout(
    font_family=repcfg.CELSIA_FONT,
    font_size=repcfg.PLOTLY_TITLE_FONT_SIZE,
    font_color=repcfg.FULL_PALETTE[1],
    title_x=repcfg.PLOTLY_TITLE_X,
    width=repcfg.JBOOK_PLOTLY_WIDTH + 100,  # Aumentar el ancho de la gr√°fica en 100 unidades
    height=repcfg.JBOOK_PLOTLY_HEIGHT,
    xaxis_title="Mes",
    xaxis_tickangle=45,  # Rotar las etiquetas de los meses
    xaxis_tickfont_size=10,  # Reducir el tama√±o de las etiquetas
)

# Mostrar el gr√°fico
fig.show()

------------------

[1;31m---------------------------------------------------------------------------[0m
[1;31mNameError[0m                                 Traceback (most recent call last)
Cell [1;32mIn[15], line 3[0m
[0;32m      1[0m [38;5;66;03m#prueba[39;00m
[1;32m----> 3[0m tabla1 [38;5;241m=[39m pd[38;5;241m.[39mDataFrame([43mdata[49m)
[0;32m      5[0m [38;5;66;03m# Convertir la columna "year" a tipo categ√≥rico para mantener la paleta de colores discreta[39;00m
[0;32m      6[0m tabla1[[38;5;124m'[39m[38;5;124myear[39m[38;5;124m'[39m] [38;5;241m=[39m tabla1[[38;5;124m'[39m[38;5;124myear[39m[38;5;124m'[39m][38;5;241m.[39mastype([38;5;124m'[39m[38;5;124mcategory[39m[38;5;124m'[39m)

[1;31mNameError[0m: name 'data' is not defined
NameError: name 'data' is not defined

